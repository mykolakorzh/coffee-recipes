<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brew Perfect - Coffee Brewing Guide</title>
    <link href="dist/output.css" rel="stylesheet">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body class="bg-cream-25 min-h-screen font-sans" x-data="coffeeApp()">
    
    <!-- Main Content Container -->
    <main class="min-h-screen flex flex-col">
        
        <!-- Header Section with Brand Info (always visible) -->
        <div class="relative">
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                <!-- Brand Header (nav only, always visible) -->
                <div class="flex justify-center mb-20 pt-8">
                    <div class="flex items-center space-x-3 sm:space-x-4 bg-white backdrop-blur-sm rounded-full px-4 sm:px-6 py-2 sm:py-3 border border-cream-200 shadow-sm">
                        <!-- Coffee Icon -->
                        <div class="w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-cream-500 to-cream-700 rounded-full flex items-center justify-center">
                            <span class="text-cream-50 font-bold text-xs sm:text-sm">☕</span>
                        </div>
                        <span class="font-medium text-sm sm:text-base text-cream-800">Brew Perfect</span>
                        <!-- Divider -->
                        <div class="w-px h-4 sm:h-6 bg-cream-300"></div>
                        <!-- Author Info -->
                        <div class="flex items-center space-x-2">
                            <div class="w-5 h-5 sm:w-6 sm:h-6 bg-cream-600 rounded-full flex items-center justify-center">
                                <span class="text-cream-50 font-medium text-xs">M</span>
                            </div>
                            <span class="text-cream-600 text-xs sm:text-sm">By <span class="font-medium">Mykola</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hero Section (only on home view) -->
        <div x-show="currentView === 'home'" class="text-center mb-16">
            <h1 class="text-4xl sm:text-5xl lg:text-7xl font-bold text-cream-900 mb-4 sm:mb-6 leading-tight">
                Perfect Coffee, Every Time
            </h1>
            <div class="max-w-2xl mx-auto">
                <p class="text-lg sm:text-xl text-cream-600 mb-2">
                    Quickly find any coffee recipe that you need to start this morning.
                </p>
                <p class="text-lg sm:text-xl text-cream-600">
                    From kalita to aeropress, discover your perfect cup.
                </p>
            </div>
        </div>

        <!-- Recipe Detail Header (when viewing recipe) -->
        <div 
            x-show="currentView === 'recipe'" 
            class="flex-shrink-0 sm:py-4"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 transform -translate-y-4"
            x-transition:enter-end="opacity-100 transform translate-y-0"
        >
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-[120px]">
                <!-- Back to Methods button (aligned with recipe content) -->
                <div class="mb-6">
                    <button 
                        @click="goHome()"
                        class="flex items-center space-x-2 px-4 py-2 text-cream-600 hover:text-cream-800 transition-colors duration-200 bg-cream-50/90 rounded-lg shadow-sm">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                        <span class="font-medium">Back to Methods</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="flex-1">
            <div class="px-4 sm:px-6 lg:px-[120px] py-6 sm:py-8">
                
                <!-- Home View: Method Grid -->
                <div 
                    x-show="currentView === 'home'" 
                    x-transition:enter="transition ease-out duration-500"
                    x-transition:enter-start="opacity-0"
                    x-transition:enter-end="opacity-100"
                    x-transition:leave="transition ease-in duration-300"
                    x-transition:leave-start="opacity-100"
                    x-transition:leave-end="opacity-0"
                >
                    <!-- Brewing Methods Grid - Responsive columns -->
                    <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 mx-auto">
                        <template x-for="method in brewingMethods" :key="method.id">
                            <div 
                                @click="selectMethod(method)"
                                class="group cursor-pointer bg-white rounded-4xl sm:p-8 shadow-sm hover:shadow-md transition-all duration-300 border border-cream-200 hover:border-cream-300 hover:-translate-y-1"
                            >
                                <!-- Blue Circle Icon -->
                                <div class="w-10 h-10 sm:w-12 sm:h-12 bg-blue-500 rounded-full mb-4 sm:mb-6 flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
                                    <div class="w-5 h-5 sm:w-6 sm:h-6 bg-white rounded-full"></div>
                                </div>
                                
                                <!-- Method Info -->
                                <h3 class="font-semibold text-lg sm:text-xl text-cream-900 mb-2 sm:mb-3" x-text="method.name"></h3>
                                <p class="text-cream-600 text-sm mb-3 sm:mb-4 leading-relaxed" x-text="method.description"></p>
                                
                                <!-- Time -->
                                <div class="text-sm text-cream-500" x-text="method.time"></div>
                            </div>
                        </template>
                    </section>
                </div>

                <!-- Recipe Detail View -->
                <div 
                    x-show="currentView === 'recipe'" 
                    x-transition:enter="transition ease-out duration-500"
                    x-transition:enter-start="opacity-0 transform translate-y-4"
                    x-transition:enter-end="opacity-100 transform translate-y-0"
                    x-transition:leave="transition ease-in duration-300"
                    x-transition:leave-start="opacity-100 transform translate-y-0"
                    x-transition:leave-end="opacity-0 transform translate-y-4"
                >
                    <div x-show="selectedMethod" class="max-w-4xl mx-auto">
                        
                        <!-- Recipe Header -->
                        <div class="bg-cream-50 rounded-xl sm:rounded-2xl p-6 sm:p-8 shadow-sm border border-cream-200 mb-6 sm:mb-8">
                            <div class="flex items-start justify-between mb-4 sm:mb-6">
                                <div>
                                    <h1 class="text-2xl sm:text-3xl font-bold text-cream-950 mb-2" x-text="selectedMethod?.name"></h1>
                                    <p class="text-cream-700 text-base sm:text-lg" x-text="selectedMethod?.longDescription"></p>
                                </div>
                                <div class="text-4xl sm:text-6xl text-cream-300 animate-pulse" x-text="selectedMethod?.icon"></div>
                            </div>
                            
                            <!-- Recipe Stats -->
                            <div class="grid grid-cols-3 gap-3 sm:gap-4 pt-4 sm:pt-6 border-t border-cream-200">
                                <div class="text-center">
                                    <div class="text-xl sm:text-2xl font-bold text-cream-800" x-text="selectedMethod?.time"></div>
                                    <div class="text-xs sm:text-sm text-cream-500">Brew Time</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xl sm:text-2xl font-bold text-cream-800" x-text="selectedMethod?.difficulty"></div>
                                    <div class="text-xs sm:text-sm text-cream-500">Difficulty</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xl sm:text-2xl font-bold text-cream-800" x-text="selectedMethod?.yield"></div>
                                    <div class="text-xs sm:text-sm text-cream-500">Serves</div>
                                </div>
                            </div>
                        </div>

                        <!-- Interactive Recipe Calculator -->
                        <div class="bg-cream-50 rounded-xl sm:rounded-2xl p-6 sm:p-8 shadow-sm border border-cream-200 mb-6 sm:mb-8">
                            <h2 class="text-lg sm:text-xl font-semibold text-cream-900 mb-4 sm:mb-6">Recipe Calculator</h2>
                            
                            <div class="grid sm:grid-cols-2 gap-6 sm:gap-8">
                                <!-- Serving Size Adjuster -->
                                <div>
                                    <label class="block text-sm font-medium text-cream-800 mb-2 sm:mb-3">Serving Size</label>
                                    <div class="flex items-center space-x-3 sm:space-x-4">
                                        <button 
                                            @click="adjustServings(-1)"
                                            class="w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-cream-100 hover:bg-cream-200 flex items-center justify-center transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 shadow-sm"
                                            :disabled="servings <= 1"
                                        >
                                            <span class="text-cream-700 font-bold">-</span>
                                        </button>
                                        <div class="text-center">
                                            <div class="text-xl sm:text-2xl font-bold text-cream-900 transition-all duration-200" x-text="servings"></div>
                                            <div class="text-xs sm:text-sm text-cream-600">cups</div>
                                        </div>
                                        <button 
                                            @click="adjustServings(1)"
                                            class="w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-cream-100 hover:bg-cream-200 flex items-center justify-center transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 shadow-sm"
                                            :disabled="servings >= 6"
                                        >
                                            <span class="text-cream-700 font-bold">+</span>
                                        </button>
                                    </div>
                                </div>

                                <!-- Coffee Strength -->
                                <div>
                                    <label class="block text-sm font-medium text-cream-800 mb-2 sm:mb-3">Coffee Strength</label>
                                    <div class="space-y-2">
                                        <input 
                                            type="range" 
                                            min="0.8" 
                                            max="1.2" 
                                            step="0.1" 
                                            x-model="strengthMultiplier"
                                            class="w-full h-2 bg-cream-200 rounded-lg appearance-none cursor-pointer transition-all duration-200"
                                        >
                                        <div class="flex justify-between text-xs text-cream-600">
                                            <span>Mild</span>
                                            <span>Medium</span>
                                            <span>Strong</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Calculated Recipe -->
                            <div class="mt-6 sm:mt-8 p-4 sm:p-6 bg-cream-100 rounded-lg sm:rounded-xl border border-cream-200 shadow-sm">
                                <h3 class="font-semibold text-cream-900 mb-3 sm:mb-4">Your Recipe</h3>
                                <div class="grid grid-cols-2 gap-3 sm:gap-4">
                                    <div class="transition-all duration-300">
                                        <span class="text-cream-700">Coffee:</span>
                                        <span class="font-semibold text-cream-900 ml-2" x-text="calculatedCoffee + 'g'"></span>
                                    </div>
                                    <div class="transition-all duration-300">
                                        <span class="text-cream-700">Water:</span>
                                        <span class="font-semibold text-cream-900 ml-2" x-text="calculatedWater + 'ml'"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Equipment & Ingredients -->
                        <div class="grid sm:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8">
                            <!-- Equipment -->
                            <div class="bg-cream-50 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-sm border border-cream-200">
                                <h3 class="font-semibold text-cream-900 mb-3 sm:mb-4">Equipment Needed</h3>
                                <ul class="space-y-2">
                                    <template x-for="item in selectedMethod?.equipment" :key="item">
                                        <li class="flex items-center space-x-3 transition-all duration-200 hover:bg-cream-100 rounded-lg p-2 -m-2">
                                            <div class="w-2 h-2 bg-cream-500 rounded-full"></div>
                                            <span class="text-cream-800 text-sm sm:text-base" x-text="item"></span>
                                        </li>
                                    </template>
                                </ul>
                            </div>

                            <!-- Ingredients -->
                            <div class="bg-cream-50 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-sm border border-cream-200">
                                <h3 class="font-semibold text-cream-900 mb-3 sm:mb-4">What You'll Need</h3>
                                <div class="space-y-3">
                                    <div class="flex justify-between transition-all duration-300">
                                        <span class="text-cream-700 text-sm sm:text-base">Coffee (medium grind)</span>
                                        <span class="font-semibold text-cream-900" x-text="calculatedCoffee + 'g'"></span>
                                    </div>
                                    <div class="flex justify-between transition-all duration-300">
                                        <span class="text-cream-700 text-sm sm:text-base">Hot water (92-96°C)</span>
                                        <span class="font-semibold text-cream-900" x-text="calculatedWater + 'ml'"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Brewing Steps with Timer -->
                        <div class="bg-cream-50 rounded-xl sm:rounded-2xl p-6 sm:p-8 shadow-sm border border-cream-200 mb-6 sm:mb-8">
                            <div class="flex items-center justify-between mb-4 sm:mb-6">
                                <h3 class="text-lg sm:text-xl font-semibold text-cream-900">Brewing Steps</h3>
                                <button 
                                    @click="toggleTimer()"
                                    class="px-3 sm:px-4 py-2 bg-cream-600 hover:bg-cream-700 text-cream-50 rounded-lg transition-all duration-200 font-medium hover:scale-105 active:scale-95 shadow-md active:shadow-sm text-sm sm:text-base"
                                    x-text="timerActive ? 'Stop Timer' : 'Start Timer'"
                                ></button>
                            </div>

                            <!-- Timer Display -->
                            <div 
                                x-show="timerActive" 
                                class="mb-4 sm:mb-6 p-4 bg-cream-100 rounded-lg sm:rounded-xl border border-cream-200 shadow-sm"
                                x-transition:enter="transition ease-out duration-300"
                                x-transition:enter-start="opacity-0 transform scale-95"
                                x-transition:enter-end="opacity-100 transform scale-100"
                                x-transition:leave="transition ease-in duration-200"
                                x-transition:leave-start="opacity-100 transform scale-100"
                                x-transition:leave-end="opacity-0 transform scale-95"
                            >
                                <div class="text-center">
                                    <div class="text-2xl sm:text-3xl font-bold text-cream-900 mb-2 animate-pulse" x-text="formatTime(currentTime)"></div>
                                    <div class="text-cream-700 text-sm sm:text-base" x-text="'Step ' + (currentStep + 1) + ' of ' + selectedMethod?.steps.length"></div>
                                </div>
                                
                                <!-- Progress Bar -->
                                <div class="mt-3 sm:mt-4 w-full bg-cream-200 rounded-full h-2">
                                    <div 
                                        class="bg-cream-600 h-2 rounded-full transition-all duration-500 ease-out"
                                        :style="'width: ' + ((currentStep + 1) / selectedMethod?.steps.length * 100) + '%'"
                                    ></div>
                                </div>
                            </div>

                            <!-- Steps List -->
                            <div class="space-y-3 sm:space-y-4">
                                <template x-for="(step, index) in selectedMethod?.steps" :key="index">
                                    <div 
                                        class="flex space-x-3 sm:space-x-4 p-3 sm:p-4 rounded-lg sm:rounded-xl transition-all duration-300"
                                        :class="timerActive && index === currentStep ? 'bg-cream-100 border border-cream-300 scale-105 shadow-sm' : 'bg-cream-25 hover:bg-cream-50'"
                                    >
                                        <div 
                                            class="flex-shrink-0 w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-semibold transition-all duration-300 shadow-sm text-sm sm:text-base"
                                            :class="timerActive && index <= currentStep ? 'bg-cream-600 text-cream-50 animate-pulse' : 'bg-cream-200 text-cream-800'"
                                            x-text="index + 1"
                                        ></div>
                                        <div class="flex-1">
                                            <p class="text-cream-900 text-sm sm:text-base" x-text="step.instruction"></p>
                                            <p class="text-xs sm:text-sm text-cream-600 mt-1" x-text="step.time"></p>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- Pro Tips -->
                        <div class="bg-gradient-to-r from-cream-50 to-cream-100 rounded-xl sm:rounded-2xl p-6 sm:p-8 shadow-sm border border-cream-200">
                            <h3 class="font-semibold text-cream-900 mb-3 sm:mb-4 flex items-center">
                                <span class="text-lg sm:text-xl mr-2 animate-bounce">💡</span>
                                Pro Tips
                            </h3>
                            <div class="space-y-2 sm:space-y-3">
                                <template x-for="tip in selectedMethod?.tips" :key="tip">
                                    <p class="text-cream-800 text-sm sm:text-base transition-all duration-200 hover:text-cream-900" x-text="tip"></p>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

       <!-- Footer -->
        <footer class="w-full text-center py-8 sm:py-12 px-4 sm:px-6 md:px-[120px]">
            <!-- Full-width divider -->
            <div class="w-full h-px bg-cream-200">
                <div class="max-w-4xl mx-auto h-full"></div>
            </div>
            
            <!-- Footer content -->
            <div>
                <div class="max-w-4xl mx-auto md:mt-8">
                    <p class="text-cream-600 text-sm sm:text-base">Made with coffee and love</p>
                </div>
            </div>
        </footer>

    </main>

    <script>
        // Alpine.js main application logic
        function coffeeApp() {
            return {
                // Application state
                currentView: 'home',
                selectedMethod: null,
                servings: 1,
                strengthMultiplier: 1.0,
                timerActive: false,
                currentTime: 0,
                currentStep: 0,
                timerInterval: null,

                // Brewing methods data - updated to match Figma exactly
                brewingMethods: [
                    {
                        id: 'v60',
                        name: 'Hario V60',
                        icon: '🌀',
                        description: 'Clean, bright, and nuanced flavors',
                        longDescription: 'The V60 produces a clean, bright cup that highlights the unique characteristics of your coffee beans.',
                        time: '3-4 min',
                        difficulty: 'Medium',
                        yield: '1-2 cups',
                        baseRatio: { coffee: 20, water: 300 },
                        equipment: [
                            'Hario V60 dripper',
                            'V60 paper filters',
                            'Gooseneck kettle',
                            'Digital scale',
                            'Grinder',
                            'Timer'
                        ],
                        steps: [
                            {
                                instruction: 'Heat water to 92-96°C and rinse the filter in the V60. Place on scale and zero.',
                                time: '0:00 - 0:30'
                            },
                            {
                                instruction: 'Add ground coffee and create a small well in the center. Start timer and pour 2x coffee weight in water.',
                                time: '0:00 - 0:15'
                            },
                            {
                                instruction: 'Let coffee bloom for 30 seconds, then begin slow, circular pours.',
                                time: '0:30 - 2:30'
                            },
                            {
                                instruction: 'Complete final pour and let coffee finish dripping.',
                                time: '2:30 - 3:30'
                            }
                        ],
                        tips: [
                            'Use a medium-fine grind, similar to table salt',
                            'Pour in slow, circular motions from center outward',
                            'Maintain consistent water temperature throughout brewing'
                        ]
                    },
                    {
                        id: 'aeropress',
                        name: 'AeroPress',
                        icon: '🔄',
                        description: 'Clean, bright, and nuanced flavors',
                        longDescription: 'AeroPress creates a full-bodied, smooth cup with lower acidity than most brewing methods.',
                        time: '3-4 min',
                        difficulty: 'Easy',
                        yield: '1 cup',
                        baseRatio: { coffee: 17, water: 250 },
                        equipment: [
                            'AeroPress brewer',
                            'AeroPress filters',
                            'Stirring paddle',
                            'Digital scale',
                            'Grinder',
                            'Timer'
                        ],
                        steps: [
                            {
                                instruction: 'Insert filter into cap and rinse. Assemble AeroPress in standard position.',
                                time: '0:00 - 0:30'
                            },
                            {
                                instruction: 'Add ground coffee and pour hot water (85°C). Stir gently.',
                                time: '0:00 - 0:15'
                            },
                            {
                                instruction: 'Steep for 1 minute, then attach cap and flip onto cup.',
                                time: '0:15 - 1:15'
                            },
                            {
                                instruction: 'Press down slowly and steadily for 20-30 seconds.',
                                time: '1:15 - 1:45'
                            }
                        ],
                        tips: [
                            'Use a fine to medium grind',
                            'Experiment with inverted method for longer steeping',
                            'Press slowly and consistently for best extraction'
                        ]
                    },
                    {
                        id: 'chemex',
                        name: 'Chemex',
                        icon: '⏳',
                        description: 'Clean, bright, and nuanced flavors',
                        longDescription: 'Chemex filters remove oils and fine particles, resulting in a very clean, tea-like cup.',
                        time: '3-4 min',
                        difficulty: 'Medium',
                        yield: '2-4 cups',
                        baseRatio: { coffee: 30, water: 500 },
                        equipment: [
                            'Chemex brewer',
                            'Chemex bonded filters',
                            'Gooseneck kettle',
                            'Digital scale',
                            'Grinder',
                            'Timer'
                        ],
                        steps: [
                            {
                                instruction: 'Place filter with 3-layer side against spout. Rinse with hot water and empty.',
                                time: '0:00 - 0:30'
                            },
                            {
                                instruction: 'Add coffee and create well. Start timer, pour 2x coffee weight for bloom.',
                                time: '0:00 - 0:15'
                            },
                            {
                                instruction: 'After 45 seconds, pour in slow circles reaching total weight by 3:30.',
                                time: '0:45 - 3:30'
                            },
                            {
                                instruction: 'Let coffee finish dripping completely.',
                                time: '3:30 - 5:00'
                            }
                        ],
                        tips: [
                            'Use medium-coarse grind, coarser than V60',
                            'Pour very slowly to avoid over-extraction',
                            'The thick filter removes most oils and sediment'
                        ]
                    },
                    {
                        id: 'kalita',
                        name: 'Kalita wave',
                        icon: '🌊',
                        description: 'Clean, bright, and nuanced flavors',
                        longDescription: 'The flat-bottom design provides even extraction and a well-balanced, forgiving cup.',
                        time: '3-4 min',
                        difficulty: 'Easy',
                        yield: '1-2 cups',
                        baseRatio: { coffee: 22, water: 350 },
                        equipment: [
                            'Kalita Wave dripper',
                            'Kalita Wave filters',
                            'Gooseneck kettle',
                            'Digital scale',
                            'Grinder',
                            'Timer'
                        ],
                        steps: [
                            {
                                instruction: 'Place filter and rinse. Add coffee and level the bed.',
                                time: '0:00 - 0:30'
                            },
                            {
                                instruction: 'Start timer, pour 3x coffee weight in center for bloom.',
                                time: '0:00 - 0:15'
                            },
                            {
                                instruction: 'After 45 seconds, pour in 3-4 stages, keeping water level consistent.',
                                time: '0:45 - 2:45'
                            },
                            {
                                instruction: 'Let coffee finish dripping.',
                                time: '2:45 - 3:30'
                            }
                        ],
                        tips: [
                            'Use medium grind, similar to kosher salt',
                            'Keep water level consistent during pours',
                            'The flat bottom provides more even extraction than V60'
                        ]
                    },
                    {
                        id: 'cold-brew',
                        name: 'Cold brew',
                        icon: '🧊',
                        description: 'Clean, bright, and nuanced flavors',
                        longDescription: 'Long extraction time creates a smooth, naturally sweet concentrate with low acidity.',
                        time: '3-4 min',
                        difficulty: 'Easy',
                        yield: '4-6 cups',
                        baseRatio: { coffee: 100, water: 1000 },
                        equipment: [
                            'Large jar or cold brew maker',
                            'Fine mesh strainer',
                            'Cheesecloth or paper filter',
                            'Digital scale',
                            'Grinder'
                        ],
                        steps: [
                            {
                                instruction: 'Grind coffee coarsely and combine with room temperature water in jar.',
                                time: '0:00 - 0:05'
                            },
                            {
                                instruction: 'Stir well to ensure all grounds are saturated.',
                                time: '0:05 - 0:10'
                            },
                            {
                                instruction: 'Cover and steep at room temperature for 12-24 hours.',
                                time: '12-24 hours'
                            },
                            {
                                instruction: 'Strain through fine mesh and filter. Dilute concentrate 1:1 with water or milk.',
                                time: '24:00 - 24:10'
                            }
                        ],
                        tips: [
                            'Use very coarse grind to make straining easier',
                            'Longer steeping time (18-24h) creates stronger concentrate',
                            'Store concentrate in refrigerator for up to 2 weeks'
                        ]
                    },
                    {
                        id: 'french-press',
                        name: 'French press',
                        icon: '☕',
                        description: 'Clean, bright, and nuanced flavors',
                        longDescription: 'Immersion brewing creates a full-bodied, rich cup with oils and fine particles.',
                        time: '3-4 min',
                        difficulty: 'Easy',
                        yield: '2-4 cups',
                        baseRatio: { coffee: 30, water: 500 },
                        equipment: [
                            'French Press',
                            'Kettle',
                            'Digital scale',
                            'Grinder',
                            'Timer',
                            'Stirring spoon'
                        ],
                        steps: [
                            {
                                instruction: 'Preheat French Press with hot water, then empty and add coarse ground coffee.',
                                time: '0:00 - 0:30'
                            },
                            {
                                instruction: 'Start timer and pour hot water (96°C). Stir gently to saturate grounds.',
                                time: '0:00 - 0:30'
                            },
                            {
                                instruction: 'Place lid on top but don\'t press. Steep for 4 minutes.',
                                time: '0:30 - 4:30'
                            },
                            {
                                instruction: 'Press plunger down slowly and serve immediately.',
                                time: '4:30 - 5:00'
                            }
                        ],
                        tips: [
                            'Use coarse grind to prevent over-extraction',
                            'Don\'t press too hard to avoid bitter flavors',
                            'Serve immediately to prevent over-extraction'
                        ]
                    }
                ],

                // Computed properties
                get calculatedCoffee() {
                    if (!this.selectedMethod) return 0;
                    return Math.round(this.selectedMethod.baseRatio.coffee * this.servings * this.strengthMultiplier);
                },

                get calculatedWater() {
                    if (!this.selectedMethod) return 0;
                    return Math.round(this.selectedMethod.baseRatio.water * this.servings);
                },

                // Methods
                selectMethod(method) {
                    this.selectedMethod = method;
                    this.currentView = 'recipe';
                    this.resetTimer();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                },

                goHome() {
                    this.currentView = 'home';
                    this.selectedMethod = null;
                    this.resetTimer();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                },

                adjustServings(delta) {
                    const newServings = this.servings + delta;
                    if (newServings >= 1 && newServings <= 6) {
                        this.servings = newServings;
                    }
                },

                toggleTimer() {
                    if (this.timerActive) {
                        this.stopTimer();
                    } else {
                        this.startTimer();
                    }
                },

                startTimer() {
                    this.timerActive = true;
                    this.currentTime = 0;
                    this.currentStep = 0;
                    
                    this.timerInterval = setInterval(() => {
                        this.currentTime++;
                        this.updateCurrentStep();
                    }, 1000);
                },

                stopTimer() {
                    this.timerActive = false;
                    if (this.timerInterval) {
                        clearInterval(this.timerInterval);
                        this.timerInterval = null;
                    }
                },

                resetTimer() {
                    this.stopTimer();
                    this.currentTime = 0;
                    this.currentStep = 0;
                },

                updateCurrentStep() {
                    if (!this.selectedMethod) return;
                    
                    const totalSteps = this.selectedMethod.steps.length;
                    const stepDuration = 60;
                    
                    const newStep = Math.min(
                        Math.floor(this.currentTime / stepDuration),
                        totalSteps - 1
                    );
                    
                    this.currentStep = newStep;
                },

                formatTime(seconds) {
                    const mins = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    return `${mins}:${secs.toString().padStart(2, '0')}`;
                },

                init() {
                    console.log('Figma-matched Coffee App initialized! ☕');
                }
            }
        }
    </script>
</body>
</html>
